{"ast":null,"code":"import \"core-js/modules/es.function.name.js\";\nimport \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/es.regexp.exec.js\";\nimport \"core-js/modules/es.string.replace.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"ProjectView\",\n  data: function data() {\n    return {\n      new_proj: {\n        name: \"\",\n        is_public: \"\"\n      },\n      page_name: \"project_page\",\n      is_search: \"false\",\n      search_keyword: \"\",\n      proj_data: {},\n      isModalVisible: false,\n      canvasData: {\n        file: {\n          \"class\": \"GraphLinksModel\",\n          copiesArrays: true,\n          copiesArrayObjects: true,\n          nodeDataArray: [{\n            category: \"Data\",\n            reasonsList: [{}],\n            key: -2,\n            loc: \"-99.10220015417542 -20.151221229488044\"\n          }],\n          linkDataArray: []\n        },\n        code: \"if __name__ == '__main__':\\n  main()\"\n      }\n    };\n  },\n  mounted: function mounted() {\n    // Fetch data on page load\n    this.getData();\n  },\n  methods: {\n    // 200\n    getData: function getData() {\n      var _this = this;\n\n      console.log(this.is_search);\n\n      if (this.is_search == \"false\") {\n        axios({\n          method: \"get\",\n          url: \"/project/\" + localStorage.uid + \"/\"\n        }).then(function (res) {\n          console.log(res.data);\n\n          if (res.data.status == 200) {\n            _this.proj_data = res.data.project_detail;\n            console.log(res.data.project_detail);\n            console.log(_this.proj_data);\n          } else {\n            alert(\"project loading error!\");\n          }\n        });\n      } else {\n        var formData = new FormData();\n        formData.append(\"page_name\", this.page_name);\n        formData.append(\"keyword\", this.search_keyword);\n        axios({\n          method: \"post\",\n          url: \"/project/search/\" + localStorage.uid + \"/\",\n          data: formData\n        }).then(function (res) {\n          console.log(res.data);\n\n          if (res.data.status == \"200\") {\n            _this.proj_data = res.data.project_datail;\n          } else if (res.data.status == \"500\") {\n            alert(\"Something wrong...\");\n          }\n        });\n        this.is_search = \"false\";\n      }\n    },\n    // 200\n    newProject: function newProject() {\n      var formData = new FormData();\n      formData.append(\"name\", this.new_proj.name);\n      formData.append(\"is_public\", this.new_proj.is_public);\n      formData.append(\"file\", JSON.stringify(this.canvasData.file));\n      console.log(this.new_proj.name);\n      console.log(this.new_proj.is_public);\n      console.log(JSON.stringify(this.canvasData.file));\n      axios({\n        method: \"post\",\n        url: \"/project/create/\" + localStorage.uid + \"/\",\n        data: formData\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.status == \"200\") {\n          console.log(\"formData ok! 200\");\n        } else if (res.data.status == \"500\") {\n          console.log(\"formData error 500\");\n        } else if (res.data.status == \"400\") {\n          console.log(\"can not save 400\");\n        }\n      });\n      location.replace(\"/project/\");\n    },\n    // 200\n    openProject: function openProject() {\n      this.$refs.fileRef.dispatchEvent(new MouseEvent(\"click\"));\n    },\n    // 200\n    uploadProject: function uploadProject() {\n      var form_data = new FormData();\n      var file = document.getElementById(\"file\").files[0];\n      form_data.append(\"file\", file, file.name);\n      axios({\n        method: \"post\",\n        url: \"/project/upload/\" + localStorage.uid + \"/\",\n        data: form_data,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (res) {\n        console.log(res.data); // if (res.data.status == \"200\") {\n        //  console.log(\"upload ok!\");\n        // } else {\n        //  alert(\"upload fail!\");\n        // }\n\n        location.replace(\"/project/\");\n      });\n    },\n    // untested\n    search: function search() {\n      this.is_search = \"true\";\n      this.getData();\n    },\n    // 200\n    remove: function remove(proj) {\n      var _this2 = this;\n\n      var formData = new FormData();\n      formData.append(\"project_id\", proj.id);\n      axios({\n        method: \"post\",\n        url: \"/project/remove/\" + localStorage.uid + \"/\" + proj.id + \"/\",\n        data: formData\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.status == \"200\") {\n          _this2.proj_data = res.data.project_datail;\n        } else if (res.data.status == \"500\") {\n          alert(\"Something wrong...\");\n        }\n\n        location.replace(\"/project/\");\n      });\n    },\n    // 200\n    enterCanvas: function enterCanvas(proj) {\n      localStorage.pid = proj.id;\n      location.replace(\"/canvas/\");\n    },\n    // 200\n    showModal: function showModal() {\n      this.isModalVisible = true;\n    },\n    // 200\n    closeModal: function closeModal() {\n      this.isModalVisible = false;\n    }\n  }\n};","map":{"version":3,"mappings":"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","names":["axios","name","data","new_proj","is_public","page_name","is_search","search_keyword","proj_data","isModalVisible","canvasData","file","copiesArrays","copiesArrayObjects","nodeDataArray","category","reasonsList","key","loc","linkDataArray","code","mounted","getData","methods","console","log","method","url","localStorage","uid","then","res","status","project_detail","alert","formData","FormData","append","project_datail","newProject","JSON","stringify","location","replace","openProject","$refs","fileRef","dispatchEvent","MouseEvent","uploadProject","form_data","document","getElementById","files","headers","search","remove","proj","id","enterCanvas","pid","showModal","closeModal"],"sourceRoot":"","sources":["/root/Comp208-Neural-Lego/frontend/src/views/ProjectView.vue"],"sourcesContent":["<template>\n  <div id=\"page-top\">\n    <!-- Page Wrapper -->\n    <div id=\"wrapper\">\n      <!-- Sidebar -->\n      <ul\n        class=\"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion\"\n        id=\"accordionSidebar\"\n      >\n        <!-- Sidebar - Brand -->\n\n        <a\n          class=\"sidebar-brand d-flex align-items-center justify-content-center\"\n        >\n          <div class=\"sidebar-brand-text mx-3\">NEURAL LEGO</div>\n        </a>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/profile\">\n            <i class=\"fas fa-fw fa-user\"></i>\n            <span>User</span></a\n          >\n        </li>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item active\">\n          <a class=\"nav-link\" href=\"/project\">\n            <i class=\"fas fa-fw fa-folder\"></i>\n            <span>Project</span></a\n          >\n        </li>\n\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/dataset\">\n            <i class=\"fas fa-fw fa-folder\"></i>\n            <span>Dataset</span></a\n          >\n        </li>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/template\">\n            <i class=\"fas fa-fw fa-table\"></i>\n            <span>Template</span></a\n          >\n        </li>\n\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/canvas/\">\n            <i class=\"fas fa-fw fa-palette\"></i>\n            <span>Canvas</span></a\n          >\n        </li>\n\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/\">\n            <i class=\"fas fa-fw fa-arrow-circle-left\"></i>\n            <span>Log out</span></a\n          >\n        </li>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider d-none d-md-block\" />\n      </ul>\n      <!-- End of Sidebar -->\n\n      <!-- Content Wrapper -->\n      <div id=\"content-wrapper\" class=\"d-flex flex-column\">\n        <!-- Main Content -->\n        <div id=\"content\">\n          <!-- Topbar -->\n          <nav\n            class=\"\n              navbar navbar-expand navbar-light\n              bg-white\n              topbar\n              mb-4\n              static-top\n              shadow\n            \"\n          >\n            <!-- Sidebar Toggle (Topbar) -->\n            <button\n              id=\"sidebarToggleTop\"\n              class=\"btn btn-link d-md-none rounded-circle mr-3\"\n            >\n              <i class=\"fa fa-bars\"></i>\n            </button>\n\n            <!-- Topbar Search -->\n            <form\n              class=\"\n                d-none d-sm-inline-block\n                form-inline\n                mr-auto\n                ml-md-3\n                my-2 my-md-0\n                mw-100\n                navbar-search\n              \"\n            >\n              <div class=\"input-group\">\n                <input\n                  v-model=\"search_keyword\"\n                  type=\"text\"\n                  class=\"form-control bg-light border-0 small\"\n                  placeholder=\"Search for...\"\n                  aria-label=\"Search\"\n                  aria-describedby=\"basic-addon2\"\n                />\n                <div class=\"input-group-append\">\n                  <button\n                    class=\"btn btn-primary\"\n                    type=\"button\"\n                    @click=\"search()\"\n                  >\n                    <i class=\"fas fa-search fa-sm\"></i>\n                  </button>\n                </div>\n              </div>\n            </form>\n\n            <ul class=\"navbar-nav ms-auto\">\n              <li class=\"nav-item\">\n                <button\n                  class=\"btn btn-primary\"\n                  type=\"button\"\n                  @click=\"showModal()\"\n                >\n                  New\n                </button>\n              </li>\n              &ensp;\n              <li class=\"nav-item\">\n                <button\n                  class=\"btn btn-primary\"\n                  type=\"file\"\n                  @click=\"openProject()\"\n                >\n                  Open\n                </button>\n\n                <input\n                  type=\"file\"\n                  class=\"form-control-file\"\n                  ref=\"fileRef\"\n                  id=\"file\"\n                  v-show=\"false\"\n                  @change=\"uploadProject()\"\n                />\n              </li>\n            </ul>\n          </nav>\n          <!-- End of Topbar -->\n\n          <!-- Begin Page Content -->\n          <div class=\"container-fluid\">\n            <!-- Project Card Example -->\n            <div class=\"card shadow mb-4\">\n              <div class=\"card-header py-3\">\n                <h6 class=\"m-0 font-weight-bold text-primary\">Projects</h6>\n              </div>\n              <div class=\"card-body\">\n                <div class=\"table-responsive-lg\">\n                  <table class=\"table table-hover\">\n                    <thead class=\"thead-dark\">\n                      <tr>\n                        <th scope=\"col\"></th>\n                        <th scope=\"col\">Name</th>\n                        <th scope=\"col\">Time</th>\n                        <th scope=\"col\">Public</th>\n                        <th scope=\"col\">Operation</th>\n                      </tr>\n                    </thead>\n                    <tbody>\n                      <tr v-for=\"proj in proj_data\" :key=\"proj.id\">\n                        <th scope=\"col\"></th>\n                        <td>\n                          <button\n                            type=\"button\"\n                            class=\"btn btn-link\"\n                            @click=\"enterCanvas(proj)\"\n                          >\n                            {{ proj.project_name }}\n                          </button>\n                        </td>\n\n                        <td>\n                          <button type=\"button\" class=\"btn btn-link\" disabled>\n                            {{ proj.last_save_time }}\n                          </button>\n                        </td>\n\n                        <td>\n                          <button type=\"button\" class=\"btn btn-link\" disabled>\n                            {{ proj.is_public }}\n                          </button>\n                        </td>\n\n                        <td>\n                          <button\n                            class=\"btn btn-warning\"\n                            @click=\"enterCanvas(proj)\"\n                          >\n                            Edit</button\n                          >&ensp;\n                          <button class=\"btn btn-danger\" @click=\"remove(proj)\">\n                            Delete\n                          </button>\n                        </td>\n                      </tr>\n                    </tbody>\n                  </table>\n                </div>\n\n                <!-- End of Sidebar -->\n              </div>\n            </div>\n          </div>\n        </div>\n        <!-- End of Content Wrapper -->\n      </div>\n      <!-- End of Page Wrapper -->\n\n      <!-- Logout Modal-->\n      <div\n        class=\"modal fade\"\n        id=\"logoutModal\"\n        tabindex=\"-1\"\n        role=\"dialog\"\n        aria-labelledby=\"exampleModalLabel\"\n        aria-hidden=\"true\"\n      >\n        <div class=\"modal-dialog\" role=\"document\">\n          <div class=\"modal-content\">\n            <div class=\"modal-header\">\n              <h5 class=\"modal-title\" id=\"exampleModalLabel\">\n                Ready to Leave?\n              </h5>\n              <button\n                class=\"close\"\n                type=\"button\"\n                data-dismiss=\"modal\"\n                aria-label=\"Close\"\n              >\n                <span aria-hidden=\"true\">×</span>\n              </button>\n            </div>\n            <div class=\"modal-body\">\n              Select \"Logout\" below if you are ready to end your current\n              session.\n            </div>\n            <div class=\"modal-footer\">\n              <button\n                class=\"btn btn-secondary\"\n                type=\"button\"\n                data-dismiss=\"modal\"\n              ></button>\n              <a class=\"btn btn-primary\" href=\"/login\">Logout</a>\n            </div>\n          </div>\n        </div>\n      </div>\n    </div>\n\n    <!-- Modal -->\n    <div class=\"modal-container\" v-show=\"isModalVisible\">\n      <div class=\"modal-dialog\" role=\"document\">\n        <div class=\"modal-content\">\n          <div class=\"modal-header\">\n            <h5 class=\"modal-title\" id=\"exampleModalLabel\">New project</h5>\n            <button\n              type=\"button\"\n              class=\"close\"\n              data-dismiss=\"modal\"\n              aria-label=\"Close\"\n              @click=\"closeModal()\"\n            >\n              <span aria-hidden=\"true\">&times;</span>\n            </button>\n          </div>\n          <!-- create -->\n          <form>\n            <div class=\"modal-body\">\n              <div class=\"form-group\">\n                <label for=\"name\">Project Name</label>\n                <input\n                  type=\"text\"\n                  class=\"form-control\"\n                  placeholder=\"Enter project name..\"\n                  v-model=\"new_proj.name\"\n                />\n              </div>\n\n              <div class=\"form-check\">\n                <input\n                  type=\"checkbox\"\n                  class=\"form-check-input\"\n                  id=\"share-to-public\"\n                  v-model=\"new_proj.is_public\"\n                />\n                <label class=\"form-check-label\" for=\"exampleCheck1\"\n                  >Share to public?</label\n                >\n              </div>\n            </div>\n\n            <div class=\"modal-footer\">\n              <button\n                type=\"button\"\n                class=\"btn btn-secondary\"\n                data-dismiss=\"modal\"\n                @click=\"closeModal()\"\n              >\n                Close\n              </button>\n              <button\n                type=\"button\"\n                class=\"btn btn-primary\"\n                @click=\"newProject()\"\n              >\n                Create\n              </button>\n            </div>\n          </form>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"ProjectView\",\n\n  data() {\n    return {\n      new_proj: {\n        name: \"\",\n        is_public: \"\",\n      },\n\n      page_name: \"project_page\",\n\nis_search: \"false\",      \nsearch_keyword: \"\",\n\n      proj_data: {},\n\n      isModalVisible: false,\n\n      canvasData: {\n        file: {\n          class: \"GraphLinksModel\",\n          copiesArrays: true,\n          copiesArrayObjects: true,\n          nodeDataArray: [\n            {\n              category: \"Data\",\n              reasonsList: [{}],\n              key: -2,\n              loc: \"-99.10220015417542 -20.151221229488044\",\n            },\n          ],\n          linkDataArray: [],\n        },\n        code: `if __name__ == '__main__':\n  main()`,\n      },\n    };\n  },\n\n  mounted() {\n    // Fetch data on page load\n    this.getData();\n  },\n\n  methods: {\n    // 200\n    getData() {\n      console.log(this.is_search);\n\n      if (this.is_search == \"false\") {\n        axios({\n          method: \"get\",\n          url: \"/project/\" + localStorage.uid + \"/\",\n        }).then((res) => {\n          console.log(res.data);\n          if (res.data.status == 200) {\n            this.proj_data = res.data.project_detail;\n            console.log(res.data.project_detail);\n            console.log(this.proj_data);\n          } else {\n            alert(\"project loading error!\");\n          }\n        });\n      } else {\n        let formData = new FormData();\n        formData.append(\"page_name\", this.page_name);\n        formData.append(\"keyword\", this.search_keyword);\n\n        axios({\n          method: \"post\",\n          url: \"/project/search/\" + localStorage.uid + \"/\",\n          data: formData,\n        }).then((res) => {\n          console.log(res.data);\n          if (res.data.status == \"200\") {\n            this.proj_data = res.data.project_datail;\n          } else if (res.data.status == \"500\") {\n            alert(\"Something wrong...\");\n          }\n        });\n        this.is_search = \"false\";\n      }\n    },\n\n    // 200\n    newProject() {\n      let formData = new FormData();\n      formData.append(\"name\", this.new_proj.name);\n      formData.append(\"is_public\", this.new_proj.is_public);\n      formData.append(\"file\", JSON.stringify(this.canvasData.file));\n\n      console.log(this.new_proj.name);\n      console.log(this.new_proj.is_public);\n      console.log(JSON.stringify(this.canvasData.file));\n\n      axios({\n        method: \"post\",\n        url: \"/project/create/\" + localStorage.uid + \"/\",\n        data: formData,\n      }).then((res) => {\n        console.log(res.data);\n        if (res.data.status == \"200\") {\n          console.log(\"formData ok! 200\");\n        } else if (res.data.status == \"500\") {\n          console.log(\"formData error 500\");\n        } else if (res.data.status == \"400\") {\n          console.log(\"can not save 400\");\n        }\n      });\n\n      location.replace(\"/project/\");\n    },\n\n    // 200\n    openProject() {\n      this.$refs.fileRef.dispatchEvent(new MouseEvent(\"click\"));\n    },\n\n    // 200\n    uploadProject() {\n      var form_data = new FormData();\n      var file = document.getElementById(\"file\").files[0];\n      form_data.append(\"file\", file, file.name);\n\n      axios({\n        method: \"post\",\n        url: \"/project/upload/\" + localStorage.uid + \"/\",\n        data: form_data,\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      }).then((res) => {\n        console.log(res.data);\n        // if (res.data.status == \"200\") {\n        //  console.log(\"upload ok!\");\n        // } else {\n        //  alert(\"upload fail!\");\n       // }\n         location.replace(\"/project/\");\n      });\n    },\n\n    // untested\n    search() {\n    this.is_search = \"true\";    \nthis.getData();   \n },\n\n    // 200\n    remove(proj) {\n      let formData = new FormData();\n      formData.append(\"project_id\", proj.id);\n\n      axios({\n        method: \"post\",\n        url: \"/project/remove/\" + localStorage.uid + \"/\" + proj.id + \"/\",\n        data: formData,\n      }).then((res) => {\n        console.log(res.data);\n        if (res.data.status == \"200\") {\n          this.proj_data = res.data.project_datail;\n        } else if (res.data.status == \"500\") {\n          alert(\"Something wrong...\");\n        }\n        location.replace(\"/project/\");\n      });\n    },\n\n    // 200\n    enterCanvas(proj) {\n      localStorage.pid = proj.id;\n      location.replace(\"/canvas/\");\n    },\n\n    // 200\n    showModal() {\n      this.isModalVisible = true;\n    },\n\n    // 200\n    closeModal() {\n      this.isModalVisible = false;\n    },\n  },\n};\n</script>\n\n<style scoped src=\"../../new_pages/vendor/fontawesome-free/css/all.min.css\"></style>\n<style scoped src=\"../../new_pages/css/sb-admin-2.min.css\"></style>\n\n<style scoped>\n.modal-container {\n  position: absolute;\n  top: 0;\n  bottom: 0;\n  left: 0;\n  right: 0;\n}\n.modal-dialog {\n  position: relative;\n  align-self: center;\n}\n</style>\n"]},"metadata":{},"sourceType":"module"}