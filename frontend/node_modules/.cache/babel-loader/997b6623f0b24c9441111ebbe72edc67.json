{"ast":null,"code":"import \"core-js/modules/es.json.stringify.js\";\nimport \"core-js/modules/web.timers.js\";\nimport axios from \"axios\";\nexport default {\n  name: \"ConfigView\",\n  data: function data() {\n    return {\n      config: {\n        dataset: \"\",\n        optimizer: \"\",\n        lr: 0,\n        test_batch_size: 0,\n        batch_size: 0,\n        epoch: 0,\n        seed: 0\n      },\n      dataset_data: {},\n      train_status_data: {\n        finished_epoch: 0,\n        roc: \"\",\n        acc: \"\"\n      },\n      timer: \"\"\n    };\n  },\n  methods: {\n    // 200\n    getData: function getData() {\n      var _this = this;\n\n      this.getDatasetName();\n      axios({\n        method: \"get\",\n        url: \"/train/\" + localStorage.uid + \"/\" + localStorage.pid + \"/\"\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.status == \"200\") {\n          _this.config.optimizer = res.data.optimizer;\n          _this.config.lr = res.data.lr;\n          _this.config.test_batch_size = res.data.test_batch_size;\n          _this.config.batch_size = res.data.batch_size;\n          _this.config.epoch = res.data.epoch;\n          _this.config.seed = res.data.seed;\n          _this.config.dataset = res.data.dataset_name;\n        } else if (res.data.status == \"204\") {\n          console.log(\"no config now\");\n        } else {\n          alert(\"config loading error!\");\n        }\n      });\n    },\n    // 200\n    getDatasetName: function getDatasetName() {\n      var _this2 = this;\n\n      axios({\n        method: \"get\",\n        url: \"/dataset/\" + localStorage.uid + \"/\"\n      }).then(function (res) {\n        if (res.data.status == \"200\") {\n          _this2.dataset_data = res.data.dataset_detail;\n        } else {\n          alert(\"dataset loading error!\");\n        }\n      });\n    },\n    // 200\n    apply: function apply() {\n      var _this3 = this;\n\n      var form_data = new FormData();\n      form_data.append(\"config\", JSON.stringify(this.config));\n      axios({\n        method: \"post\",\n        url: \"/train/apply/\" + localStorage.uid + \"/\" + localStorage.pid + \"/\",\n        data: form_data,\n        headers: {\n          \"Content-Type\": \"multipart/form-data\"\n        }\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.status == \"200\") {\n          console.log(\"apply ok!\");\n\n          _this3.getData();\n        } else {\n          alert.log(\"apply fail!\");\n        }\n      });\n    },\n    // untested\n    getTrainStatus: function getTrainStatus() {\n      var _this4 = this;\n\n      axios({\n        method: \"get\",\n        url: \"/train/status\" + localStorage.uid + \"/\" + localStorage.pid + \"/\"\n      }).then(function (res) {\n        if (res.data.status == 200) {\n          _this4.train_status_data.finished_epoch = res.data.train_staus.finished_epoch;\n          _this4.train_status_data.roc = res.data.train_staus.roc;\n          _this4.train_status_data.acc = res.data.train_staus.acc;\n        } else {\n          alert(\"train error!\");\n        }\n      });\n    },\n    // untested\n    run: function run() {\n      var _this5 = this;\n\n      var form_data = new FormData();\n      form_data.append(\"run\", \"true\");\n      axios({\n        method: \"post\",\n        url: \"/train/apply/\" + localStorage.uid + \"/\" + localStorage.pid + \"/\",\n        data: form_data\n      }).then(function (res) {\n        console.log(res.data);\n\n        if (res.data.status == \"200\") {\n          _this5.timer = setInterval(_this5.getTrainStatus(), 1000);\n        } else {\n          alert.log(\"apply fail!\");\n        }\n      });\n    }\n  },\n  mounted: function mounted() {\n    this.getData();\n  },\n  beforeDestroy: function beforeDestroy() {\n    clearTimeout(this.timer);\n  }\n};","map":{"version":3,"mappings":";;AAqeA,OAAOA,KAAP,MAAkB,OAAlB;AAEA,eAAe;AACbC,MAAI,EAAE,YADO;AAEbC,MAFa,kBAEN;AACL,WAAO;AACLC,YAAM,EAAE;AACNC,eAAO,EAAE,EADH;AAENC,iBAAS,EAAE,EAFL;AAGNC,UAAE,EAAE,CAHE;AAINC,uBAAe,EAAE,CAJX;AAKNC,kBAAU,EAAE,CALN;AAMNC,aAAK,EAAE,CAND;AAONC,YAAI,EAAE;AAPA,OADH;AAWLC,kBAAY,EAAE,EAXT;AAaLC,uBAAiB,EAAE;AACjBC,sBAAc,EAAE,CADC;AAEjBC,WAAG,EAAE,EAFY;AAGjBC,WAAG,EAAE;AAHY,OAbd;AAmBLC,WAAK,EAAE;AAnBF,KAAP;AAqBD,GAxBY;AA0BbC,SAAO,EAAE;AACP;AACAC,WAFO,qBAEG;AAAA;;AACR,WAAKC,cAAL;AAEAnB,WAAK,CAAC;AACJoB,cAAM,EAAE,KADJ;AAEJC,WAAG,EAAE,YAAYC,YAAY,CAACC,GAAzB,GAA+B,GAA/B,GAAqCD,YAAY,CAACE,GAAlD,GAAwD;AAFzD,OAAD,CAAL,CAGGC,IAHH,CAGQ,UAACC,GAAD,EAAS;AACfC,eAAO,CAACC,GAAR,CAAYF,GAAG,CAACxB,IAAhB;;AACA,YAAIwB,GAAG,CAACxB,IAAJ,CAAS2B,MAAT,IAAmB,KAAvB,EAA8B;AAC5B,eAAI,CAAC1B,MAAL,CAAYE,SAAZ,GAAwBqB,GAAG,CAACxB,IAAJ,CAASG,SAAjC;AACA,eAAI,CAACF,MAAL,CAAYG,EAAZ,GAAiBoB,GAAG,CAACxB,IAAJ,CAASI,EAA1B;AACA,eAAI,CAACH,MAAL,CAAYI,eAAZ,GAA8BmB,GAAG,CAACxB,IAAJ,CAASK,eAAvC;AACA,eAAI,CAACJ,MAAL,CAAYK,UAAZ,GAAyBkB,GAAG,CAACxB,IAAJ,CAASM,UAAlC;AACA,eAAI,CAACL,MAAL,CAAYM,KAAZ,GAAoBiB,GAAG,CAACxB,IAAJ,CAASO,KAA7B;AACA,eAAI,CAACN,MAAL,CAAYO,IAAZ,GAAmBgB,GAAG,CAACxB,IAAJ,CAASQ,IAA5B;AACA,eAAI,CAACP,MAAL,CAAYC,OAAZ,GAAsBsB,GAAG,CAACxB,IAAJ,CAAS4B,YAA/B;AACF,SARA,MAQO,IAAIJ,GAAG,CAACxB,IAAJ,CAAS2B,MAAT,IAAmB,KAAvB,EAA8B;AACnCF,iBAAO,CAACC,GAAR,CAAY,eAAZ;AACF,SAFO,MAEA;AACLG,eAAK,CAAC,uBAAD,CAAL;AACF;AACD,OAlBD;AAmBD,KAxBM;AA0BP;AACAZ,kBA3BO,4BA2BU;AAAA;;AACfnB,WAAK,CAAC;AACJoB,cAAM,EAAE,KADJ;AAEJC,WAAG,EAAE,cAAcC,YAAY,CAACC,GAA3B,GAAiC;AAFlC,OAAD,CAAL,CAGGE,IAHH,CAGQ,UAACC,GAAD,EAAS;AACf,YAAIA,GAAG,CAACxB,IAAJ,CAAS2B,MAAT,IAAmB,KAAvB,EAA8B;AAC5B,gBAAI,CAAClB,YAAL,GAAoBe,GAAG,CAACxB,IAAJ,CAAS8B,cAA7B;AACF,SAFA,MAEO;AACLD,eAAK,CAAC,wBAAD,CAAL;AACF;AACD,OATD;AAUD,KAtCM;AAwCP;AACAE,SAzCO,mBAyCC;AAAA;;AACN,UAAIC,SAAQ,GAAI,IAAIC,QAAJ,EAAhB;AACAD,eAAS,CAACE,MAAV,CAAiB,QAAjB,EAA2BC,IAAI,CAACC,SAAL,CAAe,KAAKnC,MAApB,CAA3B;AACAH,WAAK,CAAC;AACJoB,cAAM,EAAE,MADJ;AAEJC,WAAG,EAAE,kBAAkBC,YAAY,CAACC,GAA/B,GAAqC,GAArC,GAA2CD,YAAY,CAACE,GAAxD,GAA8D,GAF/D;AAGJtB,YAAI,EAAEgC,SAHF;AAIJK,eAAO,EAAE;AAAE,0BAAgB;AAAlB;AAJL,OAAD,CAAL,CAKGd,IALH,CAKQ,UAACC,GAAD,EAAS;AACfC,eAAO,CAACC,GAAR,CAAYF,GAAG,CAACxB,IAAhB;;AACA,YAAIwB,GAAG,CAACxB,IAAJ,CAAS2B,MAAT,IAAmB,KAAvB,EAA8B;AAC5BF,iBAAO,CAACC,GAAR,CAAY,WAAZ;;AACA,gBAAI,CAACV,OAAL;AACF,SAHA,MAGO;AACLa,eAAK,CAACH,GAAN,CAAU,aAAV;AACF;AACD,OAbD;AAcD,KA1DM;AA4DP;AACAY,kBA7DO,4BA6DU;AAAA;;AACfxC,WAAK,CAAC;AACJoB,cAAM,EAAE,KADJ;AAEJC,WAAG,EAAE,kBAAkBC,YAAY,CAACC,GAA/B,GAAqC,GAArC,GAA2CD,YAAY,CAACE,GAAxD,GAA8D;AAF/D,OAAD,CAAL,CAGGC,IAHH,CAGQ,UAACC,GAAD,EAAS;AACf,YAAIA,GAAG,CAACxB,IAAJ,CAAS2B,MAAT,IAAmB,GAAvB,EAA4B;AAC1B,gBAAI,CAACjB,iBAAL,CAAuBC,cAAvB,GACEa,GAAG,CAACxB,IAAJ,CAASuC,WAAT,CAAqB5B,cADvB;AAEA,gBAAI,CAACD,iBAAL,CAAuBE,GAAvB,GAA6BY,GAAG,CAACxB,IAAJ,CAASuC,WAAT,CAAqB3B,GAAlD;AACA,gBAAI,CAACF,iBAAL,CAAuBG,GAAvB,GAA6BW,GAAG,CAACxB,IAAJ,CAASuC,WAAT,CAAqB1B,GAAlD;AACF,SALA,MAKO;AACLgB,eAAK,CAAC,cAAD,CAAL;AACF;AACD,OAZD;AAaD,KA3EM;AA6EP;AACAW,OA9EO,iBA8ED;AAAA;;AACJ,UAAIR,SAAQ,GAAI,IAAIC,QAAJ,EAAhB;AACAD,eAAS,CAACE,MAAV,CAAiB,KAAjB,EAAwB,MAAxB;AACApC,WAAK,CAAC;AACJoB,cAAM,EAAE,MADJ;AAEJC,WAAG,EAAE,kBAAkBC,YAAY,CAACC,GAA/B,GAAqC,GAArC,GAA2CD,YAAY,CAACE,GAAxD,GAA8D,GAF/D;AAGJtB,YAAI,EAAEgC;AAHF,OAAD,CAAL,CAIGT,IAJH,CAIQ,UAACC,GAAD,EAAS;AACfC,eAAO,CAACC,GAAR,CAAYF,GAAG,CAACxB,IAAhB;;AACA,YAAIwB,GAAG,CAACxB,IAAJ,CAAS2B,MAAT,IAAmB,KAAvB,EAA8B;AAC5B,gBAAI,CAACb,KAAL,GAAa2B,WAAW,CAAC,MAAI,CAACH,cAAL,EAAD,EAAwB,IAAxB,CAAxB;AACF,SAFA,MAEO;AACLT,eAAK,CAACH,GAAN,CAAU,aAAV;AACF;AACD,OAXD;AAYD;AA7FM,GA1BI;AA0HbgB,SA1Ha,qBA0HH;AACR,SAAK1B,OAAL;AACD,GA5HY;AA8Hb2B,eA9Ha,2BA8HG;AACdC,gBAAY,CAAC,KAAK9B,KAAN,CAAZ;AACD;AAhIY,CAAf","names":["axios","name","data","config","dataset","optimizer","lr","test_batch_size","batch_size","epoch","seed","dataset_data","train_status_data","finished_epoch","roc","acc","timer","methods","getData","getDatasetName","method","url","localStorage","uid","pid","then","res","console","log","status","dataset_name","alert","dataset_detail","apply","form_data","FormData","append","JSON","stringify","headers","getTrainStatus","train_staus","run","setInterval","mounted","beforeDestroy","clearTimeout"],"sourceRoot":"","sources":["/Users/wanghaonan/Documents/GitHub/Comp208-Neural-Lego/frontend/src/views/TrainView.vue"],"sourcesContent":["<template>\n  <body id=\"page-top\">\n    <!-- Page Wrapper -->\n    <div id=\"wrapper\">\n      <!-- Sidebar -->\n      <ul\n        class=\"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion\"\n        id=\"accordionSidebar\"\n      >\n        <!-- Sidebar - Brand -->\n\n        <a\n          class=\"sidebar-brand d-flex align-items-center justify-content-center\"\n        >\n          <!-- <div class=\"sidebar-brand-icon rotate-n-15\">\n                    <i class=\"fas fa-laugh-wink\"></i>\n                </div> -->\n          <div class=\"sidebar-brand-text mx-3\">NEURAL LEGO</div>\n        </a>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/profile\">\n            <i class=\"fas fa-fw fa-user\"></i>\n            <span>User</span></a\n          >\n        </li>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/project\">\n            <i class=\"fas fa-fw fa-folder\"></i>\n            <span>Project</span></a\n          >\n        </li>\n\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/dataset\">\n            <i class=\"fas fa-fw fa-folder\"></i>\n            <span>Dataset</span></a\n          >\n        </li>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/template\">\n            <i class=\"fas fa-fw fa-table\"></i>\n            <span>Template</span></a\n          >\n        </li>\n\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item active\">\n          <a class=\"nav-link\" href=\"/canvas\">\n            <i class=\"fas fa-fw fa-palette\"></i>\n            <span>Canvas</span></a\n          >\n        </li>\n\n        <hr class=\"sidebar-divider my-0\" />\n\n        <!-- Nav Item - Dashboard -->\n        <li class=\"nav-item\">\n          <a class=\"nav-link\" href=\"/welcome\">\n            <i class=\"fas fa-fw fa-arrow-circle-left\"></i>\n            <span>Log out</span></a\n          >\n        </li>\n\n        <!-- Divider -->\n        <hr class=\"sidebar-divider d-none d-md-block\" />\n      </ul>\n      <!-- End of Sidebar -->\n\n      <!-- Content Wrapper -->\n      <div id=\"content-wrapper\" class=\"d-flex flex-column\">\n        <!-- Main Content -->\n        <div id=\"content\">\n          <!-- Topbar -->\n          <nav\n            class=\"\n              navbar navbar-expand navbar-light\n              bg-white\n              topbar\n              mb-4\n              static-top\n              shadow\n            \"\n          >\n            <!-- Sidebar Toggle (Topbar) -->\n            <button\n              id=\"sidebarToggleTop\"\n              class=\"btn btn-link d-md-none rounded-circle mr-3\"\n            >\n              <i class=\"fa fa-bars\"></i>\n            </button>\n\n            <!-- Topbar Search -->\n            <form\n              class=\"\n                d-none d-sm-inline-block\n                form-inline\n                mr-auto\n                ml-md-3\n                my-2 my-md-0\n                mw-100\n                navbar-search\n              \"\n            >\n              <div class=\"input-group\">\n                <input\n                  type=\"text\"\n                  class=\"form-control bg-light border-0 small\"\n                  placeholder=\"Search for...\"\n                  aria-label=\"Search\"\n                  aria-describedby=\"basic-addon2\"\n                />\n                <div class=\"input-group-append\">\n                  <button class=\"btn btn-primary\" type=\"button\">\n                    <i class=\"fas fa-search fa-sm\"></i>\n                  </button>\n                </div>\n              </div>\n            </form>\n\n            <!-- Topbar Navbar -->\n            <ul class=\"navbar-nav ml-auto\">\n              <!-- Nav Item - Search Dropdown (Visible Only XS) -->\n              <li class=\"nav-item dropdown no-arrow d-sm-none\">\n                <a\n                  class=\"nav-link dropdown-toggle\"\n                  href=\"#\"\n                  id=\"searchDropdown\"\n                  role=\"button\"\n                  data-toggle=\"dropdown\"\n                  aria-haspopup=\"true\"\n                  aria-expanded=\"false\"\n                >\n                  <i class=\"fas fa-search fa-fw\"></i>\n                </a>\n                <!-- Dropdown - Messages -->\n                <div\n                  class=\"\n                    dropdown-menu dropdown-menu-right\n                    p-3\n                    shadow\n                    animated--grow-in\n                  \"\n                  aria-labelledby=\"searchDropdown\"\n                >\n                  <form class=\"form-inline mr-auto w-100 navbar-search\">\n                    <div class=\"input-group\">\n                      <input\n                        type=\"text\"\n                        class=\"form-control bg-light border-0 small\"\n                        placeholder=\"Search for...\"\n                        aria-label=\"Search\"\n                        aria-describedby=\"basic-addon2\"\n                      />\n                      <div class=\"input-group-append\">\n                        <button class=\"btn btn-primary\" type=\"button\">\n                          <i class=\"fas fa-search fa-sm\"></i>\n                        </button>\n                      </div>\n                    </div>\n                  </form>\n                </div>\n              </li>\n            </ul>\n          </nav>\n          <!-- End of Topbar -->\n\n          <!-- Begin Page Content -->\n          <div class=\"container-fluid\">\n            <div class=\"row\">\n              <div class=\"col-xl-10 col-lg-5\">\n                <div class=\"card shadow mb-4\">\n                  <!-- Card Header - Dropdown -->\n                  <div\n                    class=\"\n                      card-header\n                      py-3\n                      d-flex\n                      flex-row\n                      align-items-center\n                      justify-content-between\n                    \"\n                  >\n                    <h6 class=\"m-0 font-weight-bold text-primary\">Setting</h6>\n                  </div>\n                  <!-- Sidebar -->\n                  <!-- <ul class=\"navbar-nav bg-gradient-primary sidebar sidebar-dark accordion\" id=\"accordionSidebar\"> -->\n                  <ul id=\"accordionSidebar\">\n                    <!-- Nav Item - Pages Collapse Menu -->\n                    <li class=\"nav-item\">\n                      <a\n                        class=\"nav-link collapsed\"\n                        href=\"#\"\n                        data-toggle=\"collapse\"\n                        data-target=\"#collapseTwo\"\n                        aria-expanded=\"true\"\n                        aria-controls=\"collapseTwo\"\n                      >\n                        <i class=\"fas fa-fw fa-cog\"></i>\n                        <span>Dataset</span>\n                      </a>\n                      <div\n                        id=\"collapseTwo\"\n                        class=\"collapse\"\n                        aria-labelledby=\"headingTwo\"\n                        data-parent=\"#accordionSidebar\"\n                      >\n                        <div class=\"form-group col-lg-2\">\n                          <label for=\"dataset\">select dataset:</label>\n                          <select\n                            v-model=\"config.dataset\"\n                            class=\"form-control\"\n                            id=\"dataset\"\n                          >\n                            <option\n                              v-for=\"ds in dataset_data\"\n                              :key=\"ds.id\"\n                              :label=\"ds.dataset_name\"\n                              :value=\"ds.dataset_name\"\n                            ></option>\n                          </select>\n                        </div>\n                      </div>\n                    </li>\n\n                    <!-- Nav Item - Pages Collapse Menu -->\n                    <li class=\"nav-item\">\n                      <a\n                        class=\"nav-link collapsed\"\n                        href=\"#\"\n                        data-toggle=\"collapse\"\n                        data-target=\"#collapseTwo\"\n                        aria-expanded=\"true\"\n                        aria-controls=\"collapseTwo\"\n                      >\n                        <i class=\"fas fa-fw fa-cog\"></i>\n                        <span>Optimizer</span>\n                      </a>\n                      <div\n                        id=\"collapseTwo\"\n                        class=\"collapse\"\n                        aria-labelledby=\"headingTwo\"\n                        data-parent=\"#accordionSidebar\"\n                      >\n                        <div class=\"form-group col-lg-2\">\n                          <label for=\"sel1\">select optimizer:</label>\n                          <select\n                            class=\"form-control\"\n                            id=\"sel1\"\n                            v-model=\"config.optimizer\"\n                          >\n                            <option value=\"Adam\">Adam</option>\n                            <option value=\"SGD\">SGD</option>\n                            <option value=\"Adagrad\">Adagrad</option>\n                          </select>\n                        </div>\n                      </div>\n                    </li>\n\n                    <!-- Nav Item - Pages Collapse Menu -->\n                    <li class=\"nav-item\">\n                      <a\n                        class=\"nav-link collapsed\"\n                        href=\"#\"\n                        data-toggle=\"collapse\"\n                        data-target=\"#collapsePages\"\n                        aria-expanded=\"true\"\n                        aria-controls=\"collapsePages\"\n                      >\n                        <i class=\"fas fa-fw fa-wrench\"></i>\n                        <span>Hyperparameters</span>\n                      </a>\n                      <div\n                        id=\"collapsePages\"\n                        class=\"collapse\"\n                        aria-labelledby=\"headingPages\"\n                        data-parent=\"#accordionSidebar\"\n                      >\n                        <div class=\"bg-white py-2 collapse-inner rounded\">\n                          <div class=\"form-group\">\n                            <div class=\"col-lg-2\">\n                              <label for=\"ex1\">learning rate</label>\n                              <input\n                                class=\"form-control input-sm\"\n                                id=\"ex1\"\n                                type=\"text\"\n                                v-model=\"config.lr\"\n                              />\n                            </div>\n                            <div class=\"col-lg-2\">\n                              <label for=\"ex2\">test batch size</label>\n                              <input\n                                class=\"form-control input-sm\"\n                                id=\"ex2\"\n                                type=\"text\"\n                                v-model=\"config.test_batch_size\"\n                              />\n                            </div>\n                            <div class=\"col-lg-2\">\n                              <label for=\"ex3\">batch size</label>\n                              <input\n                                class=\"form-control input-sm\"\n                                id=\"ex3\"\n                                type=\"text\"\n                                v-model=\"config.batch_size\"\n                              />\n                            </div>\n                            <div class=\"col-lg-2\">\n                              <label for=\"ex3\">epoch</label>\n                              <input\n                                class=\"form-control input-sm\"\n                                id=\"ex3\"\n                                type=\"text\"\n                                v-model=\"config.epoch\"\n                              />\n                            </div>\n                            <div class=\"col-lg-2\">\n                              <label for=\"ex3\">seed</label>\n                              <input\n                                class=\"form-control input-sm\"\n                                id=\"ex3\"\n                                type=\"text\"\n                                v-model=\"config.seed\"\n                              />\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </li>\n\n                    <li class=\"nav-item\">\n                      <a class=\"nav-link collapsed\">\n                        <button\n                          type=\"submit\"\n                          class=\"btn btn-primary\"\n                          @click=\"apply()\"\n                        >\n                          Apply\n                        </button>\n                      </a>\n\n                      <a class=\"nav-link collapsed\">\n                        <button\n                          type=\"submit\"\n                          class=\"btn btn-primary\"\n                          @click=\"run()\"\n                        >\n                          Run\n                        </button>\n                      </a>\n                      <!-- <button>Apply</button> -->\n                    </li>\n                  </ul>\n                  <!-- End of Sidebar -->\n                </div>\n              </div>\n\n              <div class=\"container-fluid\">\n                <div class=\"row\">\n                  <div class=\"col-xl-10 col-lg-5\">\n                    <div class=\"card shadow mb-4\">\n                      <!-- Card Header - Dropdown -->\n                      <div\n                        class=\"\n                          card-header\n                          py-3\n                          d-flex\n                          flex-row\n                          align-items-center\n                          justify-content-between\n                        \"\n                      >\n                        <h6 class=\"m-0 font-weight-bold text-primary\">\n                          progress\n                        </h6>\n\n                        <div class=\"col-xl-10 col-lg-5\">\n                          <!-- progress bar -->\n                          <div class=\"progress\">\n                            <div\n                              class=\"\n                                progress-bar\n                                progress-bar-striped\n                                progress-bar-animated\n                              \"\n                              role=\"progressbar\"\n                              style=\"width: 25%\"\n                              aria-valuenow=\"25\"\n                              aria-valuemin=\"0\"\n                              aria-valuemax=\"100\"\n                            >\n                              25%\n                            </div>\n                          </div>\n                        </div>\n                      </div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Area Chart -->\n              <div class=\"col-xl-5 col-lg-5\">\n                <div class=\"card shadow mb-4\">\n                  <!-- Card Header - Dropdown -->\n                  <div\n                    class=\"\n                      card-header\n                      py-3\n                      d-flex\n                      flex-row\n                      align-items-center\n                      justify-content-between\n                    \"\n                  >\n                    <h6 class=\"m-0 font-weight-bold text-primary\">\n                      Accuracy Curve\n                    </h6>\n                  </div>\n                  <!-- Card Body -->\n                  <div class=\"card-body\">\n                    <a href=\"#\"\n                      ><img\n                        class=\"card-img-top\"\n                        v-bind:src=\"train_status_data.acc\"\n                        alt=\"...\"\n                    /></a>\n                  </div>\n                </div>\n              </div>\n\n              <!-- Area Chart -->\n              <div class=\"col-xl-5 col-lg-5\">\n                <div class=\"card shadow mb-4\">\n                  <!-- Card Header - Dropdown -->\n                  <div\n                    class=\"\n                      card-header\n                      py-3\n                      d-flex\n                      flex-row\n                      align-items-center\n                      justify-content-between\n                    \"\n                  >\n                    <h6 class=\"m-0 font-weight-bold text-primary\">ROC Curve</h6>\n                  </div>\n                  <!-- Card Body -->\n                  <div class=\"card-body\">\n                    <a href=\"#\"\n                      ><img\n                        class=\"card-img-top\"\n                        v-bind:src=\"train_status_data.roc\"\n                        alt=\"...\"\n                    /></a>\n                  </div>\n                </div>\n              </div>\n            </div>\n          </div>\n        </div>\n      </div>\n      <!-- End of Content Wrapper -->\n    </div>\n    <!-- End of Page Wrapper -->\n  </body>\n</template>\n\n<script>\nimport axios from \"axios\";\n\nexport default {\n  name: \"ConfigView\",\n  data() {\n    return {\n      config: {\n        dataset: \"\",\n        optimizer: \"\",\n        lr: 0,\n        test_batch_size: 0,\n        batch_size: 0,\n        epoch: 0,\n        seed: 0,\n      },\n\n      dataset_data: {},\n\n      train_status_data: {\n        finished_epoch: 0,\n        roc: \"\",\n        acc: \"\",\n      },\n\n      timer: \"\",\n    };\n  },\n\n  methods: {\n    // 200\n    getData() {\n      this.getDatasetName();\n\n      axios({\n        method: \"get\",\n        url: \"/train/\" + localStorage.uid + \"/\" + localStorage.pid + \"/\",\n      }).then((res) => {\n        console.log(res.data);\n        if (res.data.status == \"200\") {\n          this.config.optimizer = res.data.optimizer;\n          this.config.lr = res.data.lr;\n          this.config.test_batch_size = res.data.test_batch_size;\n          this.config.batch_size = res.data.batch_size;\n          this.config.epoch = res.data.epoch;\n          this.config.seed = res.data.seed;\n          this.config.dataset = res.data.dataset_name;\n        } else if (res.data.status == \"204\") {\n          console.log(\"no config now\");\n        } else {\n          alert(\"config loading error!\");\n        }\n      });\n    },\n\n    // 200\n    getDatasetName() {\n      axios({\n        method: \"get\",\n        url: \"/dataset/\" + localStorage.uid + \"/\",\n      }).then((res) => {\n        if (res.data.status == \"200\") {\n          this.dataset_data = res.data.dataset_detail;\n        } else {\n          alert(\"dataset loading error!\");\n        }\n      });\n    },\n\n    // 200\n    apply() {\n      var form_data = new FormData();\n      form_data.append(\"config\", JSON.stringify(this.config));\n      axios({\n        method: \"post\",\n        url: \"/train/apply/\" + localStorage.uid + \"/\" + localStorage.pid + \"/\",\n        data: form_data,\n        headers: { \"Content-Type\": \"multipart/form-data\" },\n      }).then((res) => {\n        console.log(res.data);\n        if (res.data.status == \"200\") {\n          console.log(\"apply ok!\");\n          this.getData();\n        } else {\n          alert.log(\"apply fail!\");\n        }\n      });\n    },\n\n    // untested\n    getTrainStatus() {\n      axios({\n        method: \"get\",\n        url: \"/train/status\" + localStorage.uid + \"/\" + localStorage.pid + \"/\",\n      }).then((res) => {\n        if (res.data.status == 200) {\n          this.train_status_data.finished_epoch =\n            res.data.train_staus.finished_epoch;\n          this.train_status_data.roc = res.data.train_staus.roc;\n          this.train_status_data.acc = res.data.train_staus.acc;\n        } else {\n          alert(\"train error!\");\n        }\n      });\n    },\n\n    // untested\n    run() {\n      var form_data = new FormData();\n      form_data.append(\"run\", \"true\");\n      axios({\n        method: \"post\",\n        url: \"/train/apply/\" + localStorage.uid + \"/\" + localStorage.pid + \"/\",\n        data: form_data,\n      }).then((res) => {\n        console.log(res.data);\n        if (res.data.status == \"200\") {\n          this.timer = setInterval(this.getTrainStatus(), 1000);\n        } else {\n          alert.log(\"apply fail!\");\n        }\n      });\n    },\n  },\n\n  mounted() {\n    this.getData();\n  },\n\n  beforeDestroy() {\n    clearTimeout(this.timer);\n  },\n};\n</script>\n\n<style scoped>\n.body {\n  position: fixed;\n  background-size: cover;\n  padding: 0;\n  margin: 0;\n  height: 100%;\n  width: 100%;\n}\n</style>\n<style scoped src=\"../../new_pages/vendor/fontawesome-free/css/all.min.css\"></style>\n<style scoped src=\"../../new_pages/css/sb-admin-2.min.css\"></style>\n"]},"metadata":{},"sourceType":"module"}